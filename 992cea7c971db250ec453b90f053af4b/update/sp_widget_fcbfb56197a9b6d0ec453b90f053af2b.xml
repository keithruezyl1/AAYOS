<?xml version="1.0" encoding="UTF-8"?><record_update table="sp_widget">
    <sp_widget action="INSERT_OR_UPDATE">
        <category>kb</category>
        <client_script><![CDATA[api.controller=function() {  /* widget controller */  var c = this;};]]></client_script>
        <controller_as>c</controller_as>
        <css>/* Wrapper tweaks */&#13;
.aayos-kb-categories .panel-heading {&#13;
  padding: 10px 15px;&#13;
}&#13;
&#13;
.aayos-kb-categories .panel-title {&#13;
  font-size: 14px;&#13;
  font-weight: 600;&#13;
  margin: 0;&#13;
}&#13;
&#13;
/* Category list layout */&#13;
.aayos-kb-category-list {&#13;
  margin: 0;&#13;
  padding: 0;&#13;
}&#13;
&#13;
.aayos-kb-category-list li {&#13;
  border-radius: 4px;&#13;
  margin-bottom: 4px;&#13;
}&#13;
&#13;
/* Link styling */&#13;
.aayos-kb-category-list li &gt; a {&#13;
  display: block;&#13;
  padding: 8px 10px;&#13;
  text-decoration: none;&#13;
  color: #333;&#13;
}&#13;
&#13;
.aayos-kb-category-list li &gt; a:hover {&#13;
  background-color: #f5f5f5;&#13;
  text-decoration: none;&#13;
}&#13;
&#13;
/* Category label text */&#13;
.aayos-kb-category-label {&#13;
  font-size: 13px;&#13;
}&#13;
&#13;
/* Chevron arrow */&#13;
.aayos-kb-category-arrow {&#13;
  font-size: 11px;&#13;
  margin-top: 2px;&#13;
  color: #bbb;&#13;
}&#13;
&#13;
/* Active category state â€” AAYOS dark green theme */&#13;
.aayos-kb-category-list li.is-active &gt; a {&#13;
    background-color: #e5f5ec !important;   /* soft green background */&#13;
    border-left: 3px solid #0f623e !important; /* dark green */&#13;
    padding-left: 7px;&#13;
    font-weight: 700 !important;&#13;
    color: #0f623e !important;               /* dark green text */&#13;
}&#13;
&#13;
.aayos-kb-category-list li.is-active .aayos-kb-category-label {&#13;
    color: #0f623e !important;&#13;
    font-weight: 700 !important;&#13;
}&#13;
&#13;
/* Chevron icon becomes green on active row */&#13;
.aayos-kb-category-list li.is-active .aayos-kb-category-arrow {&#13;
    color: #0f623e !important;&#13;
}&#13;
&#13;
.aayos-kb-category-list li &gt; a:hover {&#13;
    background-color: #f0faf5 !important;&#13;
    text-decoration: none;&#13;
}&#13;
&#13;
&#13;
</css>
        <data_table>sp_instance</data_table>
        <demo_data/>
        <description/>
        <docs/>
        <field_list>color</field_list>
        <has_preview>false</has_preview>
        <id>aayos_kb_categories</id>
        <internal>false</internal>
        <link><![CDATA[function link(scope, element, attrs, controller) {  }]]></link>
        <name>AAYOS KB Categories</name>
        <option_schema/>
        <public>true</public>
        <roles/>
        <script><![CDATA[(function () {

    data.categories = [];

	// Currently selected category (from URL)
    data.selectedCategoryId = $sp.getParameter('kb_category') || '';

    // AAYOS Admin Knowledge KB sys_id
    var kbId = '2a9ad1659725b6d0ec453b90f053af0a';

    var catGR = new GlideRecord('kb_category');
    catGR.addActiveQuery();

    // Match the OOB logic: parent_id = Knowledge Base
    catGR.addQuery('parent_id', kbId);

    // If you only want top-level categories under this KB,
    // this is already sufficient; no need for addNullQuery here.

    catGR.orderBy('label');
    catGR.query();

    while (catGR.next()) {
        data.categories.push({
            value: catGR.getUniqueValue(),
            label: catGR.getValue('label')
        });
    }
})();
]]></script>
        <servicenow>false</servicenow>
        <sys_class_name>sp_widget</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2025-12-01 07:44:09</sys_created_on>
        <sys_id>fcbfb56197a9b6d0ec453b90f053af2b</sys_id>
        <sys_mod_count>7</sys_mod_count>
        <sys_name>AAYOS KB Categories</sys_name>
        <sys_package display_value="AAYOS" source="x_1868112_aayos">992cea7c971db250ec453b90f053af4b</sys_package>
        <sys_policy/>
        <sys_scope display_value="AAYOS">992cea7c971db250ec453b90f053af4b</sys_scope>
        <sys_update_name>sp_widget_fcbfb56197a9b6d0ec453b90f053af2b</sys_update_name>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2025-12-03 05:55:28</sys_updated_on>
        <template><![CDATA[<div class="aayos-kb-categories panel panel-default b">
  <div class="panel-heading">
    <h4 class="panel-title">
      <span class="fa fa-folder-open m-r-xs"></span>
      ${Categories}
    </h4>
  </div>

  <div class="panel-body">
    <ul class="aayos-kb-category-list list-unstyled">
      <li ng-repeat="a in data.categories | orderBy:'label'"
          ng-class="{'is-active': a.value === data.selectedCategoryId}">
        <a href="?id=aayos_admin_kb&kb_category={{::a.value}}">
          <span class="aayos-kb-category-label">{{::a.label}}</span>
          <span class="fa fa-chevron-right pull-right aayos-kb-category-arrow"></span>
        </a>
      </li>
    </ul>
  </div>
</div>
]]></template>
    </sp_widget>
</record_update>
